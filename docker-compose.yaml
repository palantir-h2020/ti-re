# Kafka https://kafka.apache.org/quickstart

version: "3.7"
services:
    zookeeper:
        restart: always
        hostname: zookeeper
        image: wurstmeister/zookeeper
        ports:
            - "2181:2181"
        networks:
            nat-network:
                ipv4_address: 10.0.100.2
        #logging:
        #    driver: "none"

    kafka:
        restart: always
        image: wurstmeister/kafka
        ports:
          - "9092:9092"
        hostname: kafka
        environment:
            #DOCKER_API_VERSION: 1.22
            KAFKA_ADVERTISED_HOST_NAME: kafka
            KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181
        networks:
            nat-network:
                ipv4_address: 10.0.100.3
        #logging:
        #    driver: "none"
        depends_on:
        - zookeeper

    rr-tool:
        restart: always
        build: rr-tool
        hostname: rr-tool
        stdin_open: true
        tty: true
        networks:
            # eth0
            nat-network:
                ipv4_address: 10.0.100.5
        depends_on:
            - kafka

networks:
    nat-network:
        internal: false
        name: nat-network
        ipam:
            config:
                - subnet: "10.0.100.0/24"
